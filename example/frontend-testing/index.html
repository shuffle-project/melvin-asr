<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>WhisperStream REST API / WebSocket Example</title>
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <header class="header">
      <h1>WhisperStream</h1>
      <div class="toggle">
        <label for="toggleSwitch">REST</label>
        <label class="switch">
          <input type="checkbox" id="toggleSwitch" />
          <span class="slider"></span>
        </label>
        <label for="toggleSwitch">WebSocket</label>
      </div>
    </header>

    <main class="content-panel">
      <!-- REST Content -->
      <div class="content rest active" id="restContent">
        <div class="column">
          <h3>REST</h3>
          <!-- Ask for API key and store it-->
          <label for="apiKey">API Key:</label>
          <input type="text" id="apiKey" placeholder="Enter your API key" />
          <button onclick="saveApiKey()">Save Key</button>

          <!-- Displays the status of the API -->
          <div id="checkHealth"></div>

          <!-- Drop a file here or click to select a file -->
          <div
            id="dropZone"
            ondrop="handleDrop(event)"
            ondragover="allowDrop(event)"
          >
            Drop a file here or click to select a file
          </div>

          <!-- File input element -->
          <input
            type="file"
            id="fileInput"
            accept=".wav"
            style="display: none"
            onchange="handleFileSelect(event)"
          />

          <!-- Transcode button -->
          <button onclick="requestTranscription()">Transcode</button>

          <!-- Response div -->
          <div id="response"></div>
        </div>

        <div class="column">
          <h3>Transcription</h3>
          <div id="transcriptionFileName"></div>
          <br>
          <div id="transcriptionResponse"></div>
          <div id="loadingContainer"></div>
        </div>
      </div>

      <!-- WebSocket Content -->
      <div class="content websocket" id="websocketContent">
        <h2>WebSocket</h2>
        <!-- WebSocket Start recording button -->
        <button id="startRecording">Record</button>
        <!-- Stop recording button -->
        <button id="stopRecording">Stop</button>
        <div id="liveTranscriptOutput"></div>
      </div>
    </main>

    <script src="main.js"></script>
    <script src="rest.js"></script>
    <script src="websocket.js"></script>
  </body>
</html>
